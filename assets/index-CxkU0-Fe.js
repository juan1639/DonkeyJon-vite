var V=Object.defineProperty;var W=(a,i,s)=>i in a?V(a,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[i]=s;var u=(a,i,s)=>(W(a,typeof i!="symbol"?i+"":i,s),s);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))e(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const m of h.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&e(m)}).observe(document,{childList:!0,subtree:!0});function s(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function e(c){if(c.ep)return;c.ep=!0;const h=s(c);fetch(c.href,h)}})();class H{constructor(i){this.constante={bsx:50,bsy:50,nro_filas:11,nro_columnas:16,GRAVEDAD:1,FPS:60,nro_DIAMANTES:7,nro_niveles:2,botonSelectMusica:["Musica: On","Musica: Off","Musica: On"],botonSelectDificultad:["Dificultad: Facil","Dificultad: Normal","Dificultad: DifÃ­cil"],pausaFireWorksNivelSuperado:9999,pausaMsgNivelMostrar:5200,ancho_jugador:120,alto_jugador:150},this.opciones_menuP={botonSelectMusica:0,botonSelectDificultad:1},this.resolucion=[this.constante.bsx*this.constante.nro_columnas,this.constante.bsy*this.constante.nro_filas],this.ini_suelo=this.resolucion[1]-this.constante.bsy*2,this.gap=this.constante.bsy*6,this.gapMini=this.constante.bsy*2,this.ini_jugador={args:[Math.floor(this.resolucion[0]/2),this.ini_suelo-this.constante.alto_jugador,this.constante.ancho_jugador,this.constante.alto_jugador]},this.escala={x:i,y:i},this.canvas=document.getElementById("canvas"),this.ctx=canvas.getContext("2d"),this.objeto={scroll:[],plataforma:[],escalera:[],jugador:null,bichos:[],pajaros:[],bonus:[],boommerang:[],decorativos:[],lossiete:[],showbonus:[],showvidas:[],chispa:[],textos:[],llave:null,decorativosOffgame:[]},this.marcadores={puntos:0,nivel:1,vidas:3,scorePtos:document.getElementById("puntos"),scoreNivel:document.getElementById("nivel"),scoreVidas:document.getElementById("vidas"),menuPrincipal:document.getElementById("menu__principal"),botonNewGame:document.getElementById("boton__newGame"),botonSelectDificultad:document.getElementById("boton__selectDificultad"),botonSelectMusica:document.getElementById("boton__selectMusica"),contenedorControles:document.getElementById("contenedor2__botonesControl"),botonNextLevel:document.getElementById("boton__NextLevel")},this.bandera={nivel:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]},this.nro_enemigosDificultad={mariq:[1,2,3],carac:[1,2,3],pajaros:[1,2,3]},this.nro_enemigos={mariq:[2,2,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4],carac:[2,2,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4],pajaros:[2,2,3,3,3,3,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5]},this.controles={tecla_iz:!1,tecla_de:!1,tecla_up:!1,tecla_do:!1,tecla_at:!1,tecla_music_onoff:!1,tecla_enter:!1,touch_iz:!1,touch_de:!1,touch_up:!1,touch_do:!1,touch_at:!1,touch_music_onoff:!1,touch_nextLevel:!1,touch_newGame:!1,touch_canvas:!1},this.tecla={tecla_iz:["ArrowLeft","ArrowLeft"],tecla_de:["ArrowRight","ArrowRight"],tecla_up:["ArrowUp","ArrowUp"],tecla_do:["ArrowDown","ArrowDown"],tecla_at:["Control"," "],tecla_music_onoff:["s","S"],tecla_enter:["Enter","Enter"],touch_iz:["boton__le","flecha__le"],touch_de:["boton__ri","flecha__ri"],touch_up:["boton__up","flecha__up"],touch_do:["boton__do","flecha__do"],touch_at:["boton__at","icono__at"],touch_music_onoff:["boton__music","boton__music"],touch_nextLevel:["boton__NextLevel","boton__NextLevel"],touch_newGame:["boton__newGame","boton__newGame"],touch_canvas:["canvas","canvas"]},this.estado={preJuego:!1,enJuego:!0,jugadorDies:!1,gameOver:!1,reJugar:!1,nivelSuperado:!1},this.colores={azul_fondo:"rgb(134, 210, 230)",blanco_nube:"rgb(233, 233, 233)",txt_amar2:"rgb(240, 240, 170)",txt_amar1:"rgb(255, 89, 19)",txt_amar3:"rgb(225, 155, 29)"},this.msg={nivel:!1},this.array_decorativosOffgame=[[this.resolucion[0]/2,this.resolucion[1]/2,"./img/cartel_presentacion.png",400,300],[this.resolucion[0]/2,this.resolucion[1]/2,"./img/cartel_gameover.png",400,140]],this.trucos={invisible:!1,vidasInfinitas:!1},this.imagenes={ssheet_jugador:new Image,fondo_cielo1:new Image,tile_medio:new Image,tile_madera:new Image,tile_metal:new Image,escalera:new Image},this.sonidos={gameOver:new Audio("./audio/gameoveretro.ogg"),jump:new Audio("./audio/jumpbros.ogg"),ataque:new Audio("./audio/misc125.mp3"),dieThrow1:new Audio("./audio/dieThrow1.ogg"),dieThrow2:new Audio("./audio/dieThrow2.ogg"),chips1:new Audio("./audio/chipsCollide1.ogg"),chips2:new Audio("./audio/chipsCollide2.ogg"),chips3:new Audio("./audio/chipsCollide3.ogg"),marioTuberias:new Audio("./audio/mario_tuberias.ogg"),pacmanDies:new Audio("./audio/pacmandies.ogg"),eatingCherry:new Audio("./audio/pacmaneatingcherry.mp3"),eatingGhost:new Audio("./audio/pacmaneatinghost.ogg"),intermision:new Audio("./audio/pacmanintermision.ogg"),fireWorks:new Audio("./audio/fireworks.mp3"),musicaFondo:new Audio("./audio/music-puzzle-game1.mp3")},this.volumen={gameOver:.8,jump:.3,ataque:.7,marioTuberias:.9,pacmanDies:.4,eatingCherry:.9,eatingGhost:.8,intermision:.6,fireWorks:.9,musicaFondo:.5}}}class X{constructor(i,s,e){this.ctx=t.ctx,this.id=i;const c=Math.floor(Math.random()*360);this.rad_rnd=c*Math.PI/180;const h=Math.floor(Math.random()*50)+50;this.rect={x:s,y:e,ancho:1,alto:1,size:1},this.move={activo:!0,vel:h/10,velX:Math.cos(this.rad_rnd),velY:Math.sin(this.rad_rnd)},this.duracion=30,this.max_duracion=this.duracion+15}dibuja(i){if(this.duracion>0){this.duracion--,this.duracion===0&&this.id===1&&t.estado.nivelSuperado&&N();const s=Math.floor(Math.random()*200)+55;this.duracion>26&&this.dibuja_centro(s),this.rect.x+=i[0],this.rect.y+=i[1],this.rect.x+=this.move.velX*this.move.vel,this.rect.y+=this.move.velY*this.move.vel,this.rect.size=Math.floor((this.max_duracion-this.duracion)/12),this.ctx.beginPath(),this.ctx.arc(this.rect.x,this.rect.y,this.rect.size,0,2*Math.PI),this.ctx.fillStyle="rgb(255,"+s.toString()+",9)",this.ctx.fill(),this.ctx.closePath()}}dibuja_centro(i){const s=Math.floor(Math.random()*9)+5;this.ctx.beginPath(),this.ctx.arc(this.rect.x,this.rect.y,s,0,2*Math.PI),this.ctx.fillStyle="rgb(255,"+i.toString()+",9)",this.ctx.fill(),this.ctx.closePath()}}u(X,"nro_CHISPASfireWorks",99);const j=class j{constructor(i){this.idTxt=i[0],this.alin=i[1],this.size=i[2],this.color=i[3],this.ctx=t.ctx}dibuja(i){this.ctx.save(),this.ctx.font=this.size.toString()+"px arial",this.ctx.textAlign=this.alin,this.ctx.fillStyle="transparent";const s=t.objeto.jugador.col_item,e=t.objeto.jugador.col_llave,c=t.objeto.jugador.msg_NOllave,h=t.msg.nivel;(this.size===50&&s||this.size===120&&h||this.size===70&&c||this.size===50&&e||this.size===75||this.size===27)&&(this.ctx.fillStyle=this.color);let m=t.objeto.jugador.rect.x,v=t.objeto.jugador.rect.y-t.constante.bsy,b="";this.size===120&&h&&(b=t.marcadores.nivel),this.size===27&&(v=Math.floor(t.resolucion[1]/1.3)),this.ctx.fillText(this.idTxt+b,m,v),this.ctx.restore()}};u(j,"colores",{azul_fondo:"rgb(134, 210, 230)",blanco_nube:"rgb(233, 233, 233)",txt_amar2:"rgb(240, 240, 170)",txt_amar1:"rgb(255, 89, 19)",txt_amar3:"rgb(225, 155, 29)"}),u(j,"array_textos",[[" Pulse agachar para realizar accion","center",50,j.colores.txt_amar1],[" N i v e l  ","center",120,j.colores.txt_amar3]]);let x=j;const d=class d{constructor(i,s,e){this.ctx=t.ctx,this.img=t.imagenes.fondo_cielo1,this.img.src=i[2],this.x=i[0],this.y=i[1],this.ancho=s,this.alto=e}dibuja(i){this.x+=i[0],this.y+=i[1],this.y>this.alto&&i[1]>0&&(this.y-=this.alto*2),this.y<-this.alto&&i[1]<0&&(this.y+=this.alto*2),!(this.x+this.ancho<0||this.x>t.resolucion[0]||this.y+this.alto<0||this.y>t.resolucion[1])&&this.ctx.drawImage(this.img,this.x,this.y,this.ancho,this.alto)}};u(d,"bsx",50),u(d,"bsy",50),u(d,"nro_columnas",16),u(d,"nro_filas",11),u(d,"resolucion",[d.nro_columnas*d.bsx,d.nro_filas*d.bsy]),u(d,"ini_scrolls",[[-d.resolucion[0],0,"./img/fondo_cielo103.png"],[0,0,"./img/fondo_cielo101.png"],[d.resolucion[0],0,"./img/fondo_cielo103.png"],[d.resolucion[0]*2,0,"./img/fondo_cielo101.png"],[-d.resolucion[0],-d.resolucion[1],"./img/fondo_cielo104.png"],[0,-d.resolucion[1],"./img/fondo_cielo102.png"],[d.resolucion[0],-d.resolucion[1],"./img/fondo_cielo104.png"],[d.resolucion[0]*2,-d.resolucion[1],"./img/fondo_cielo102.png"]]);let g=d;class O{constructor(i,s,e,c,h,m,v,b,w,A){this.id=i,this.ctx=t.ctx,this.img=new Image,this.img.src=this.id,this.duracion=A,this.activo=!0,this.zoomInc=2,this.rect={x:s,y:e,ancho:c,alto:h},this.clip={x:m,y:v,ancho:b,alto:w},setTimeout(()=>{this.activo=!1,t.objeto.showbonus.shift()},this.duracion)}dibuja(i){this.activo&&(this.rect.x+=i[0],this.rect.y+=i[1],(this.rect.ancho<85&&this.duracion<3e3||this.rect.ancho<150&&this.duracion>3e3)&&(this.rect.ancho+=this.zoomInc,this.rect.alto+=this.zoomInc,this.rect.x-=this.zoomInc,this.rect.y-=this.zoomInc),this.rect.y--,this.ctx.drawImage(this.img,this.clip.x,this.clip.y,this.clip.ancho,this.clip.alto,this.rect.x,this.rect.y,this.rect.ancho,this.rect.alto))}}class S{constructor(i,s,e,c,h){this.ctx=t.ctx,this.img=new Image,this.img.src=i,this.rect={x:s,y:e,ancho:70,alto:32,clipX:0,clipY:0,anchoClip:35,altoClip:16},this.move={activo:!0,velX:c*7,velY:h,anima:0},this.correcciones_pajaros={obj1_hor:0,obj1_ver:0,obj2_hor:Math.floor(this.rect.ancho/7),obj2_ver:Math.floor(this.rect.alto/6)},setInterval(()=>{this.move.anima++,this.move.anima>=4&&(this.move.anima=0)},99)}dibuja(i){this.rect.x+=i[0],this.rect.y+=i[1],this.rect.x+=this.move.velX,this.rect.y+=this.move.velY,this.check_limites(),this.check_colisionPajaros(),this.check_colisionBichos();const s=this.move.anima*this.rect.anchoClip;this.ctx.drawImage(this.img,s,this.rect.clipY,this.rect.anchoClip,this.rect.altoClip,this.rect.x,this.rect.y,this.rect.ancho,this.rect.alto)}check_limites(){const i=t.resolucion[0],s=t.resolucion[1];(this.rect.x>i||this.rect.x<-this.rect.ancho||this.rect.y>s||this.rect.y<-this.rect.alto)&&t.objeto.boommerang.shift()}check_colisionPajaros(){for(let i of t.objeto.pajaros)_(i,this,this.correcciones_pajaros,0)&&(console.log("colision Pajaro"),t.objeto.boommerang.shift(),i.abatido=!0,this.instanciar_showBonus(i),t.sonidos.dieThrow1.play(),t.sonidos.chips1.play())}check_colisionBichos(){for(let i of t.objeto.bichos)_(i,this,this.correcciones_pajaros,0)&&(console.log("colision Bicho"),t.objeto.boommerang.shift(),i.abatido=!0,this.instanciar_showBonus(i),t.sonidos.dieThrow1.play(),t.sonidos.dieThrow2.play())}instanciar_showBonus(i){t.marcadores.puntos+=800,t.marcadores.scorePtos.innerHTML="Puntos: "+t.marcadores.puntos.toString();const s=0,e=15,c=5,h=0,m=40,v=35,b=20,w=2300;t.objeto.showbonus.push(new O("./img/showPtos.png",i.rect.x,i.rect.y-s,e,c,h,m,v,b,w))}}const n=class n{constructor(i,s,e,c,h){this.anchoTile=t.constante.bsx,this.altoTile=t.constante.bsy,this.id=i,this.ctx=t.ctx,this.img=new Image,this.img.src=this.id,this.cuantos=c,this.accion=h,this.accion_realizada=!1;const m=this.elegir_sizeElemento(this.anchoTile,this.altoTile),v=m[0],b=m[1];this.rect={x:s,y:e-b,ancho:v,anchoBucle:c,alto:b},this.id.slice(0,12)==="./img/lockYe"&&(this.rect.x+=Math.floor(this.anchoTile/5)),this.anima=!1,setInterval(()=>{this.anima=this.anima?this.anima=!1:this.anima=!0},99)}dibuja(i){if(this.rect.x+=i[0],this.rect.y+=i[1],this.rect.x>t.resolucion[0]+t.constante.bsx||this.rect.y>t.resolucion[1]+t.constante.bsy||this.rect.y<-t.constante.bsy*5)return;let s=this.img;s.src=this.elegirImg();const e=this.rect.ancho,c=this.rect.alto;for(let h=0;h<this.rect.anchoBucle;h++)this.ctx.drawImage(s,this.rect.x+h*e,this.rect.y,e,c)}elegir_sizeElemento(){return this.id.slice(0,14)==="./img/Letrero_"?[this.anchoTile*4,this.altoTile*3]:this.id.slice(0,12)==="./img/signAr"?[this.anchoTile,this.altoTile*2]:this.id.slice(0,15)==="./img/switchRed"?[this.anchoTile,this.altoTile]:this.id.slice(0,12)==="./img/flagYe"?[this.anchoTile*2,this.altoTile*3]:this.id.slice(0,12)==="./img/lockYe"?[this.anchoTile*2,this.altoTile*2]:this.id.slice(0,12)==="./img/signLe"||this.id.slice(0,12)==="./img/signRi"?[this.anchoTile*2,this.altoTile*2]:[this.anchoTile*2,this.altoTile*4]}elegirImg(){return this.id.slice(0,12)==="./img/flagYe"?this.anima?"./img/flagYellow1.png":"./img/flagYellow2.png":this.id.slice(0,15)==="./img/switchRed"?this.accion_realizada?"./img/switchRed_right.png":"./img/switchRed_mid.png":this.id.slice(0,12)==="./img/lockYe"?t.objeto.llave.accion_realizada?"./img/signExit.png":"./img/lockYellow.png":this.img.src}};u(n,"ini_suelo",g.resolucion[1]-g.bsy*2),u(n,"gap",g.bsy*6),u(n,"gapMini",g.bsy*2),u(n,"array_decorativos",[[-10,n.ini_suelo,1,"./img/tree05.png",!1],[42,n.ini_suelo,1,"./img/tree05.png",!1],[-10,n.ini_suelo-n.gap*3,1,"./img/tree05.png",!1],[42,n.ini_suelo-n.gap*4,1,"./img/tree05.png",!1],[-14,n.ini_suelo-n.gap*5,3,"./img/tree05.png",!1],[42,n.ini_suelo-n.gap*6,2,"./img/tree05.png",!1],[26,n.ini_suelo,1,"./img/Letrero_creditos.png",!1],[-15,n.ini_suelo,1,"./img/Letrero_kenneyNl.png",!1],[-15,n.ini_suelo-n.gap*3,1,"./img/Letrero_IMI.png",!1],[31,n.ini_suelo-n.gap*2,1,"./img/Letrero_piscis.png",!1],[6,n.ini_suelo-n.gap*2,1,"./img/signArrow_up.png",!1],[10,n.ini_suelo-n.gap*2,1,"./img/signArrow_right.png",!1],[-7,n.ini_suelo,1,"./img/signArrow_TR.png",!1],[38,n.ini_suelo,1,"./img/signArrow_up.png",!1],[3,n.ini_suelo-n.gap*1,1,"./img/signArrow_up.png",!1],[30,n.ini_suelo-n.gap*4,1,"./img/signArrow_TL.png",!1],[32,n.ini_suelo-n.gap*4,1,"./img/signArrow_up.png",!1],[34,n.ini_suelo-n.gap*6,1,"./img/signLeft.png",!1],[9,n.ini_suelo-n.gap*5,1,"./img/signLeft.png",!1],[37,n.ini_suelo-n.gap*6,1,"./img/Letrero_Arlekin.png",!1],[2,n.ini_suelo-n.gap*5,1,"./img/switchRed_mid.png",!0],[-12,n.ini_suelo-n.gap*6,1,"./img/flagYellow1.png",!1],[-10,n.ini_suelo-n.gap*6,1,"./img/lockYellow.png",!1]]),u(n,"array_decorativos2",[[58,n.ini_suelo,1,"./img/tree05.png",!1],[-10,n.ini_suelo-n.gap*3,1,"./img/tree05.png",!1],[42,n.ini_suelo-n.gap*4,1,"./img/tree05.png",!1],[59,n.ini_suelo-n.gap*6,2,"./img/tree05.png",!1],[6,n.ini_suelo,1,"./img/tree05.png",!1],[6,n.ini_suelo-n.gap*3,1,"./img/tree05.png",!1],[26,n.ini_suelo,1,"./img/Letrero_creditos.png",!1],[1,n.ini_suelo,1,"./img/Letrero_kenneyNl.png",!1],[42,n.ini_suelo,1,"./img/Letrero_IMI.png",!1],[32,n.ini_suelo-n.gap*2,1,"./img/Letrero_piscis.png",!1],[49,n.ini_suelo,1,"./img/signArrow_up.png",!1],[12,n.ini_suelo,1,"./img/signArrow_up.png",!1],[14,n.ini_suelo,1,"./img/signRight.png",!1],[32,n.ini_suelo-n.gap*4,1,"./img/signArrow_up.png",!1],[24,n.ini_suelo-n.gap*6,1,"./img/signLeft.png",!1],[27,n.ini_suelo-n.gap*6,1,"./img/signRight.png",!1],[37,n.ini_suelo-n.gap*6,1,"./img/Letrero_Arlekin.png",!1],[35,n.ini_suelo-n.gap*6,1,"./img/switchRed_mid.png",!0],[2,n.ini_suelo-n.gap*6,1,"./img/flagYellow1.png",!1],[6,n.ini_suelo-n.gap*6,1,"./img/lockYellow.png",!1]]),u(n,"array_nivelesDecorativos",[n.array_decorativos,n.array_decorativos2,n.array_decorativos]);let M=n;class B{constructor(i,s,e,c,h){this.anchoTile=t.constante.bsx,this.altoTile=t.constante.bsy,this.id=i,console.log(this.id),this.ctx=t.ctx,this.img=new Image,this.img.src=this.id,s-=c/2,e-=h/1.7,this.rect={x:Math.floor(s),y:Math.floor(e),ancho:c,alto:h}}dibuja(i){this.rect.x+=i[0],this.rect.y+=i[1],this.ctx.drawImage(this.img,this.rect.x,this.rect.y,this.rect.ancho,this.rect.alto)}}const o=class o{constructor(i,s){this.anchoTile=t.constante.bsx,this.altoTile=t.constante.bsy,this.rutaArchivoPng=s,this.ctx=t.ctx,this.img=t.imagenes.tile_medio,this.img.src=s,this.img_bordeIz=new Image,this.img_bordeIz.src="./img/tile2.png",this.img_bordeDe=new Image,this.img_bordeDe.src="./img/tile3.png",this.bordeIz=i[3],this.bordeDe=i[4],this.rect={x:i[1]*t.constante.bsx,y:i[0],ancho:i[2]*t.constante.bsx,anchoBucle:i[2],alto:t.constante.bsy}}dibuja(i){if(this.rect.x+=i[0],this.rect.y+=i[1],this.rect.y<-t.constante.bsy||this.rect.y>t.resolucion[1]+t.constante.bsy)return;let s=this.img;for(let e=0;e<this.rect.anchoBucle;e++)e===0&&this.bordeIz?s=this.img_bordeIz:e===this.rect.anchoBucle-1&&this.bordeDe?s=this.img_bordeDe:s=this.img,this.ctx.drawImage(s,this.rect.x+e*this.anchoTile,this.rect.y,this.anchoTile,this.altoTile)}};u(o,"ini_suelo",g.resolucion[1]-g.bsy*2),u(o,"gap",g.bsy*6),u(o,"gapMini",g.bsy*2),u(o,"array_plataformas",[[o.ini_suelo-o.gap*7-o.gapMini,10,5,!0,!0,0,6],[o.ini_suelo-o.gap*6,-16,22,!1,!0,0,6],[o.ini_suelo-o.gap*7,9,12,!1,!1,1,6],[o.ini_suelo-o.gap*6,23,25,!0,!1,0,6],[o.ini_suelo-o.gap*6,12,2,!0,!0,0,6],[o.ini_suelo-o.gap*5-o.gapMini*2,30,3,!0,!0,0,6],[o.ini_suelo-o.gap*5-o.gapMini,35,2,!0,!0,0,6],[o.ini_suelo-o.gap*5,-16,20,!1,!0,0,6],[o.ini_suelo-o.gap*5,8,20,!0,!0,0,6],[o.ini_suelo-o.gap*5,32,8,!0,!0,0,6],[o.ini_suelo-o.gap*3,28,4,!0,!0,0,6],[o.ini_suelo-o.gap*4,-6,24,!0,!0,0,6],[o.ini_suelo-o.gap*4,22,26,!0,!1,0,6],[o.ini_suelo-o.gap*3,-16,15,!1,!0,0,6],[o.ini_suelo-o.gap*3,3,10,!0,!0,0,6],[o.ini_suelo-o.gap*2,-4,39,!0,!0,0,6],[o.ini_suelo-o.gap*1,-6,14,!0,!0,0,6],[o.ini_suelo-o.gap*1,11,7,!0,!0,0,6],[o.ini_suelo-o.gap*1,21,17,!0,!0,0,6],[o.ini_suelo,-16,64,!1,!1,0,6]]),u(o,"array_plataformas2",[[o.ini_suelo-o.gap*6,0,14,!1,!0,0,6],[o.ini_suelo-o.gap*6,23,23,!0,!0,0,6],[o.ini_suelo-o.gap*6,52,12,!0,!1,0,6],[o.ini_suelo-o.gap*5-o.gapMini*2,28,4,!0,!0,0,6],[o.ini_suelo-o.gap*5-o.gapMini,28,4,!0,!0,0,6],[o.ini_suelo-o.gap*5,21,18,!0,!0,0,6],[o.ini_suelo-o.gap*4,31,7,!0,!0,0,6],[o.ini_suelo-o.gap*4,22,5,!0,!0,0,6],[o.ini_suelo-o.gap*4,41,5,!0,!0,0,6],[o.ini_suelo-o.gap*3,31,4,!0,!0,0,6],[o.ini_suelo-o.gap*3,6,10,!0,!0,0,6],[o.ini_suelo-o.gap*2,32,8,!0,!0,0,6],[o.ini_suelo-o.gap*2,23,5,!0,!0,0,6],[o.ini_suelo-o.gap*1-o.gapMini*2,42,3,!0,!0,0,6],[o.ini_suelo-o.gap*1-o.gapMini,39,2,!0,!0,0,6],[o.ini_suelo-o.gap*1,25,12,!0,!0,0,6],[o.ini_suelo-o.gap*1,48,8,!1,!1,1,6],[o.ini_suelo,0,64,!1,!1,0,6]]),u(o,"array_nivelesPlataformas",[o.array_plataformas,o.array_plataformas2,o.array_plataformas]);let y=o;class U{constructor(i,s){this.anchoTile=t.constante.bsx,this.altoTile=t.constante.bsy,this.rutaArchivoPng=s,this.ctx=t.ctx,this.img=t.imagenes.tile_madera,this.img.src=s,this.rect={x:i[1]*t.constante.bsx,y:i[0],ancho:i[2]*t.constante.bsx,anchoBucle:i[2],alto:t.constante.bsy},this.move={activo:!0,velX:i[5],velY:i[5]},this.correcciones={obj1_hor:0,obj1_ver:0,obj2_hor:0,obj2_ver:0}}dibuja(i){if(this.actualiza(i),!(this.rect.y<-t.constante.bsy||this.rect.y>t.resolucion[1]+t.constante.bsy))for(let s=0;s<this.rect.anchoBucle;s++)this.ctx.drawImage(this.img,this.rect.x+s*this.anchoTile,this.rect.y,this.anchoTile,this.altoTile)}actualiza(i){if(this.rect.x+=i[0],this.rect.y+=i[1],!!t.objeto.jugador.accion_realizada){if(t.marcadores.nivel===-999){this.rect.x+=this.move.velX,this.check_colisionPlataformas()&&(this.rect.x-=this.move.velX,this.move.velX*=-1);return}if(t.marcadores.nivel>0){this.rect.y+=this.move.velY,this.check_colisionPlataformas()&&(this.rect.y-=this.move.velY,this.move.velY*=-1);return}}}check_colisionPlataformas(){for(let i of t.objeto.plataforma)if(_(i,this,this.correcciones,0)&&i.rutaArchivoPng!=="./img/tile6.png")return!0;return!1}}function z(a,i,s,e){s?t.marcadores.puntos+=64e3:e[7]===1900?t.marcadores.puntos+=e[4]:t.marcadores.puntos+=a.puntos,t.marcadores.scorePtos.innerHTML="Puntos: "+t.marcadores.puntos.toString();const c=e[0],h=e[1],m=e[2],v=e[3],b=e[4],w=e[5],A=e[6],q=e[7];t.objeto.showbonus.push(new O("./img/showPtos.png",a.rect.x,i.rect.y-c,h,m,v,b,w,A,q))}class K{constructor(i){this.ctx=t.ctx,this.img=t.imagenes.ssheet_jugador,this.img.src="../img/Ssheet_jugador.png",this.ssheet={quieto:[0,0,0,0,!0],andar:[0,110,80,110,!1],agachado:[240,0,240,0,!1],escalera:[400,0,480,0,!1],escaleraQuieto:[400,0,400,0,!1],saltar:[80,0,160,0,!1],celebrar:[560,0,640,0,!1],dies:[320,0,0,0,!1],atacando:[80,0,80,0,!1]},this.rect={x:i[0],y:i[1],ancho:i[2],alto:i[3],clipX:0,clipY:0,clipAncho:80,clipAlto:110},this.move={acelX:0,velX:6,velY:4,velYsalto:-20,velYGrav:0,flip:!1,anima:0},this.saltando=!1,this.direcc_salto=this.move.velX,this.potencia_salto=16,this.saltoBonus=[700,!1],this.col_item=!1,this.col_llave=!1,this.col_bicho=!1,this.col_pajaro=!1,this.col_bonus=!1,this.accion_realizada=!1,this.msg_NOllave=!1,this.bandera_boommerang=!1,this.cadencia_boommerang=425,this.getLos7=!1,this.invisible=!0,this.duracion_invisible=3500,this.intermitente=!0,this.duracion_dies=3200,this.correcciones={obj1_hor:0,obj1_ver:0,obj2_hor:Math.floor(i[2]/3),obj2_ver:0},this.correcciones_escalera={obj1_hor:0,obj1_ver:10,obj2_hor:Math.floor(i[2]/2),obj2_ver:0},this.correcciones_items={obj1_hor:0,obj1_ver:0,obj2_hor:0,obj2_ver:Math.floor(i[2]/3)},this.correcciones_bichos={obj1_hor:0,obj1_ver:0,obj2_hor:Math.floor(i[2]/4),obj2_ver:Math.floor(i[3]/5)},this.correcciones_pajaros={obj1_hor:0,obj1_ver:0,obj2_hor:Math.floor(i[2]/4),obj2_ver:Math.floor(i[3]/5)},this.intervalo_anima=setInterval(()=>{this.move.anima=this.move.anima===0?this.move.anima=2:this.move.anima=0},99),setInterval(()=>{this.intermitente=this.intermitente?this.intermitente=!1:this.intermitente=!0},50),setTimeout(()=>{this.invisible=!1},this.duracion_invisible)}dibuja(){if(!t.estado.enJuego)return[0,0];const i=this.actualiza();this.ctx.save(),this.move.flip&&(this.ctx.translate(this.rect.x+this.rect.ancho,0),this.ctx.scale(-1,1),this.ctx.translate(-this.rect.x,0));const s=this.selecc_ssheetAccion();return this.rect.clipX=s[0],this.rect.clipY=s[1],(!this.invisible||this.invisible&&this.intermitente)&&this.ctx.drawImage(this.img,this.rect.clipX,this.rect.clipY,this.rect.clipAncho,this.rect.clipAlto,this.rect.x,this.rect.y,this.rect.ancho,this.rect.alto),this.ctx.restore(),i}selecc_ssheetAccion(){const i=this.move.anima;return this.ssheet.quieto[4]?[this.ssheet.quieto[i],this.ssheet.quieto[i+1]]:this.ssheet.andar[4]?[this.ssheet.andar[i],this.ssheet.andar[i+1]]:this.ssheet.agachado[4]?[this.ssheet.agachado[i],this.ssheet.agachado[i+1]]:this.ssheet.escalera[4]?[this.ssheet.escalera[i],this.ssheet.escalera[i+1]]:this.ssheet.saltar[4]?[this.ssheet.saltar[i],this.ssheet.saltar[i+1]]:this.ssheet.celebrar[4]?[this.ssheet.celebrar[i],this.ssheet.celebrar[i+1]]:this.ssheet.dies[4]?[this.ssheet.dies[i],this.ssheet.dies[i+1]]:this.ssheet.atacando[4]?[this.ssheet.atacando[i],this.ssheet.atacando[i+1]]:[0,0]}actualiza(){if(t.estado.nivelSuperado)return this.reset_ssheetBooleanos(),this.ssheet.celebrar[4]=!0,[0,0];if(t.estado.jugadorDies)return this.reset_ssheetBooleanos(),this.ssheet.dies[4]=!0,[0,0];if(t.marcadores.nivel>t.constante.nro_niveles)return[0,0];let i=[0,0],s=i[0],e=i[1];return i=this.leer_teclado(i),s=i[0],e=i[1],s=this.check_limitesHorizontales(s),e=this.check_colisionPlataformas(e),this.col_item=this.check_colisionItems(),this.col_llave=this.check_colisionLlave(),!t.trucos.invisible&&!this.invisible&&(this.col_bicho=this.check_colisionBichos(),this.col_pajaro=this.check_colisionPajaros()),this.col_bonus=this.check_colisionBonus(),this.ssheet.escalera[4]||(this.move.velYGrav-=t.constante.GRAVEDAD,e+=this.move.velYGrav),[-s,e]}check_limitesHorizontales(i){const s=t.objeto.scroll[0],e=t.objeto.scroll[3],c=this.move.velX*2;return s.x-i>0&&(i=s.x),e.x+i<c&&!this.move.flip&&(i=e.x),i}check_colisionPlataformas(i){for(let s of t.objeto.plataforma)if(_(s,this,this.correcciones,0)){const e=Math.floor(this.rect.alto/2);this.move.velYGrav<0&&this.rect.y+e<s.rect.y&&(this.move.velYGrav=0,i=this.rect.y+this.rect.alto-s.rect.y,this.saltando&&(this.saltando=!1,this.saltoBonus[1]=!1))}return i}check_colisionEscaleras(){for(let i of t.objeto.escalera)if(_(i,this,this.correcciones_escalera,0))return Math.floor(this.rect.alto/2),!0;return!1}check_colisionItems(){let i=t.estado.nivelSuperado,s=t.objeto.llave;const e=t.marcadores.nivel;for(let c of t.objeto.decorativos)if(_(c,this,this.correcciones_items,0)&&(c.id==="./img/lockYellow.png"&&!i&&s.accion_realizada&&!t.bandera[e]?(t.estado.nivelSuperado=!0,t.bandera[e]=!0,N(),t.sonidos.musicaFondo.pause(),f(t.sonidos.fireWorks,!1,t.volumen.fireWorks),setTimeout(()=>{this.accion_realizada=!1,D()},t.constante.pausaFireWorksNivelSuperado)):c.id==="./img/lockYellow.png"&&!i&&!s.accion_realizada&&this.mostrar_msg("nollave"),!c.accion_realizada&&this.ssheet.agachado[4]&&c.id.slice(0,15)==="./img/switchRed"&&(c.accion_realizada=!0,this.accion_realizada=!0,f(t.sonidos.eatingGhost,!1,t.volumen.eatingGhost)),c.accion))return!0;return!1}check_colisionLlave(){const i=t.objeto.llave;if(_(i,this,this.correcciones_escalera,0)){if(!i.accion_realizada&&this.ssheet.agachado[4])return i.accion_realizada=!0,f(t.sonidos.eatingGhost,!1,t.volumen.eatingGhost),!0;if(!i.accion_realizada)return!0}return!1}check_colisionBonus(){for(let i of t.objeto.bonus)if(_(i,this,this.correcciones_pajaros,0)&&!i.accion_realizada){const s=[Math.floor(t.constante.bsy/3),30,10,0,60,40,20,2800];if(z(i,this,!1,s),t.objeto.lossiete[i.colorId].mostrar=!0,i.accion_realizada=!0,!this.getLos7&&(this.getLos7=rt(),this.getLos7)){const e=[Math.floor(t.constante.bsy),60,20,0,80,70,20,3900];z(i,this,!0,e),f(t.sonidos.intermision,!1,t.volumen.intermision)}return f(t.sonidos.chips1,!1,.9),f(t.sonidos.chips2,!1,.9),!0}return!1}check_colisionBichos(){const i=t.estado.jugadorDies;for(let s of t.objeto.bichos)if(_(s,this,this.correcciones_bichos,0)&&!i&&!this.ssheet.agachado[4]&&!s.abatido){const e=this.averiguar_plataformas(),c=s.rect.y+s.rect.alto;if(e.includes(c))return this.jugadorDies_enemigoAbatido_sonido(s),setTimeout(()=>{for(let h of t.objeto.bichos)h.check_outOfLimits(!0);for(let h of t.objeto.pajaros)h.reset_pajaro(0);this.mostrar_msg("Preparado!"),this.revivir_jugador_preparado()},this.duracion_dies),!0}return!1}check_colisionPajaros(){const i=t.estado.jugadorDies;for(let s of t.objeto.pajaros)if(_(s,this,this.correcciones_pajaros,0)&&!i&&!this.ssheet.agachado[4]&&!s.abatido)return this.jugadorDies_enemigoAbatido_sonido(s),setTimeout(()=>{for(let e of t.objeto.bichos)e.check_outOfLimits(!0);for(let e of t.objeto.pajaros)e.reset_pajaro(0);this.mostrar_msg("Preparado!"),this.revivir_jugador_preparado()},this.duracion_dies),!0;return!1}averiguar_plataformas(){const i=y.array_plataformas[0][6];let s=[];for(let e=0;e<i;e++){const c=y.ini_suelo-e*y.gap;s.push(c),s.push(c-1)}return s}leer_teclado(i){let s=i[0],e=i[1];if(this.saltando){this.reset_ssheetBooleanos(),this.ssheet.andar[4]=!0;for(let c of t.objeto.bichos)if(E(c,this)&&!this.saltoBonus[1]){console.log("salto ptos");const h=[[400,20],[200,0]],m=[Math.floor(t.constante.bsy/3),15,5,0,h[c.id][1],35,20,1900];z(c,this,!1,m),this.saltoBonus[1]=!0}return(t.controles.tecla_at||t.controles.touch_at)&&this.inicializa_disparo(),[this.direcc_salto,e]}return t.controles.tecla_iz||t.controles.touch_iz?(this.move.flip=!0,this.reset_ssheetBooleanos(),this.ssheet.andar[4]=!0,s=-this.move.velX):t.controles.tecla_de||t.controles.touch_de?(this.move.flip=!1,this.reset_ssheetBooleanos(),this.ssheet.andar[4]=!0,s=this.move.velX):(this.reset_ssheetBooleanos(),this.ssheet.quieto[4]=!0),t.controles.tecla_up||t.controles.touch_up?this.check_colisionEscaleras()?(this.reset_ssheetBooleanos(),this.ssheet.escalera[4]=!0,e=this.move.velY):this.saltando||(this.saltando=!0,this.move.velYGrav=this.potencia_salto,this.direcc_salto=this.move.flip===!0?-6:6,t.sonidos.jump.play(),f(t.sonidos.jump,!1,t.volumen.jump)):t.controles.tecla_do||t.controles.touch_do?(this.reset_ssheetBooleanos(),this.ssheet.agachado[4]=!0):(t.controles.tecla_at||t.controles.touch_at)&&this.inicializa_disparo(),[s,e]}jugadorDies_enemigoAbatido_sonido(i){t.estado.jugadorDies=!0,i.abatido=!0,t.sonidos.musicaFondo.pause(),f(t.sonidos.pacmanDies,!1,t.volumen.pacmanDies)}inicializa_disparo(){if(this.reset_ssheetBooleanos(),this.ssheet.atacando[4]=!0,!this.bandera_boommerang){this.bandera_boommerang=!0;const i="./img/boommerang_sheet.png";let s=-1,e=0;const c=Math.floor(this.rect.alto/4);this.move.flip||(s=1,e=Math.floor(this.rect.ancho/2)),t.objeto.boommerang.push(new S(i,this.rect.x+e,this.rect.y+c,s,-1)),f(t.sonidos.ataque,!1,t.volumen.ataque),setTimeout(()=>{this.bandera_boommerang=!1},this.cadencia_boommerang)}}reset_ssheetBooleanos(){const i=Object.keys(this.ssheet);for(let s of i)this.ssheet[s][4]=!1}mostrar_msg(i){if(!this.msg_NOllave&&i==="nollave"){this.msg_NOllave=!0;const s=["Debes coger la llave...","center",70,"red"];t.objeto.textos.push(new x(s)),setTimeout(()=>{this.msg_NOllave=!1,t.objeto.textos.pop()},2200)}if(i==="Preparado!"){const s=[i,"center",75,"rgb(225, 150, 19])"];t.objeto.textos.push(new x(s)),setTimeout(()=>{t.objeto.textos.pop()},2e3)}}revivir_jugador_preparado(){if(t.estado.jugadorDies=!1,t.marcadores.vidas--,this.invisible=!0,setTimeout(()=>{this.invisible=!1},this.duracion_invisible),t.marcadores.vidas<0){let i=t.array_decorativosOffgame[1];const s=i[2],e=Math.floor(i[0]),c=Math.floor(i[1]);t.objeto.decorativosOffgame.push(new B(s,e,c,i[3],i[4])),f(t.sonidos.gameOver,!1,t.volumen.gameOver);return}t.marcadores.scoreVidas.innerHTML="Vidas: "+t.marcadores.vidas.toString(),t.objeto.showvidas.pop(),t.sonidos.musicaFondo.play()}}class L{constructor(i,s){this.ctx=t.ctx,this.img=new Image,this.img.src="./img/Ssheet_platD.png",this.id=i,this.indice=s,this.abatido=!1,this.ancho=t.constante.bsx*2,this.alto=t.constante.bsy,this.elegir_ssheetId(this.id),this.rect={x:0,y:0,ancho:this.ancho,alto:this.alto,clipX:270,clipY:320,clipAncho:112,clipAlto:72};const e=[[2,2,2,2,2,2,2,2,2,2,2,3,3,3,4],[1,1,1,1,1,1,1,1,1,1,1,1,2,2,2]],c=Math.floor(Math.random()*e[this.id].length);this.move={activo:!0,acelX:0,velX:e[this.id][c],velY:0,flip:!0,anima:0},this.check_outOfLimits(!0),this.correcciones={obj1_hor:0,obj1_ver:0,obj2_hor:Math.floor(this.ancho/2),obj2_ver:0};const h=t.ini_suelo,m=t.gap;this.array_enque_nivelPlataforma=[[h-m*6-this.alto,!1],[h-m*5-this.alto,!1],[h-m*4-this.alto,!1],[h-m*3-this.alto,!1],[h-m*2-this.alto,!1],[h-m*1-this.alto,!1],[h-this.alto,!1]],this.intervalo_anima=setInterval(()=>{this.move.anima=this.move.anima===0?this.move.anima=2:this.move.anima=0},99),console.log("enemigo:",this.rect.x,this.rect.y)}dibuja(i){if(this.actualiza(i),t.estado.nivelSuperado||!this.move.activo)return;this.ctx.save(),this.move.flip&&(this.ctx.translate(this.rect.x+this.rect.ancho,0),this.ctx.scale(-1,1),this.ctx.translate(-this.rect.x,0));const s=this.selecc_ssheetAccion();this.rect.clipX=s[0],this.rect.clipY=s[1],this.ctx.drawImage(this.img,this.rect.clipX,this.rect.clipY,this.rect.clipAncho,this.rect.clipAlto,this.rect.x,this.rect.y,this.rect.ancho,this.rect.alto),this.ctx.restore()}selecc_ssheetAccion(){const i=this.move.anima;return this.ssheet.andando[4]?[this.ssheet.andando[i],this.ssheet.andando[i+1]]:[0,0]}elegir_ssheetId(i){i===0?this.ssheet={andando:[270,320,270,580,!0]}:i===1&&(this.ssheet={andando:[5,830,5,960,!0]})}actualiza(i){let s=0;this.rect.x+=i[0],this.rect.y+=i[1],this.move.activo&&(this.abatido?(this.move.velY+=t.constante.GRAVEDAD,this.rect.y+=this.move.velY,this.rect.y>t.resolucion[1]&&this.check_outOfLimits(!1)):(this.rect.x+=this.move.velX,this.recorrido++,this.move.velY+=t.constante.GRAVEDAD,s+=this.move.velY,s=this.check_colisionPlataformas(s),this.rect.y+=s,this.check_cambioDireccion(),this.check_outOfLimits(!1)))}check_colisionPlataformas(i){for(let s of t.objeto.plataforma)_(s,this,this.correcciones,0)&&(this.move.velY=0,i=s.rect.y-(this.rect.y+this.rect.alto));return i}check_cambioDireccion(){(this.rect.x===Math.floor(t.resolucion[0]/8)&&this.move.velX<0||this.rect.x===Math.floor(t.resolucion[0]/1.3)&&this.move.velX>0)&&Math.floor(Math.random()*9)<1&&(this.move.flip=this.move.flip?this.move.flip=!1:this.move.flip=!0,this.move.velX*=-1)}check_outOfLimits(i){const s=t.resolucion[1]+t.constante.bsx*3;if(this.rect.y>s||i){const e=Math.floor(t.resolucion[0]/4);this.rect.x=Math.floor(Math.random()*e),this.move.velX=Math.abs(this.move.velX),this.move.flip=!0,Math.floor(Math.random()*9)<5&&(this.rect.x=t.resolucion[0]-t.constante.bsx-this.rect.x,this.move.velX=Math.abs(this.move.velX)*-1,this.move.flip=!1),this.rect.y=-t.constante.bsy*2,this.move.activo=!1,Math.floor(Math.random()*9)<5?(this.id=0,this.elegir_ssheetId(this.id)):(this.id=1,this.elegir_ssheetId(this.id));const c=1200+Math.floor(Math.random()*1e3);setTimeout(()=>{this.move.activo=!0,this.abatido=!1},c)}}}u(L,"nro_bichos",2);class Q{constructor(i,s){this.ctx=t.ctx,this.img=new Image,this.img.src="./img/bird64x72.png",this.id=i,this.abatido=!1,this.ancho=t.constante.bsx,this.alto=t.constante.bsy,this.max_recorrY=t.constante.bsy*3,this.recorrY=0;const e=this.selecc_posInicial(s);this.rect={x:e[0],y:e[1],ancho:this.ancho*2,alto:this.alto*2,clipX:0,clipY:0,clipAncho:64,clipAlto:72},this.move={activo:!0,acelX:0,velX:e[2],velY:e[3],flip:e[4],anima:0},this.correcciones={obj1_hor:0,obj1_ver:0,obj2_hor:0,obj2_ver:0},this.intervalo_anima=setInterval(()=>{this.move.anima++,this.move.anima>20&&(this.move.anima=0)},99),console.log("ene_pajaro:",this.rect.x,this.rect.y,this.move.velY)}dibuja(i){this.actualiza(i),!t.estado.nivelSuperado&&this.move.activo&&(this.ctx.save(),this.move.flip&&(this.ctx.translate(this.rect.x+this.rect.ancho,0),this.ctx.scale(-1,1),this.ctx.translate(-this.rect.x,0)),this.rect.clipX=this.selecc_ssheetAnima(),this.ctx.drawImage(this.img,this.rect.clipX,0,this.rect.clipAncho,this.rect.clipAlto,this.rect.x,this.rect.y,this.rect.ancho,this.rect.alto),this.ctx.restore())}selecc_ssheetAnima(){return this.move.anima*this.rect.clipAncho}actualiza(i){this.move.activo&&(this.rect.x+=i[0],this.rect.y+=i[1],this.abatido?(this.move.velY+=t.constante.GRAVEDAD,this.rect.y+=this.move.velY,this.rect.y>t.resolucion[1]&&this.reset_pajaro(0)):(this.rect.x+=this.move.velX,this.recorrido+=Math.abs(this.move.velX),this.rect.y+=this.move.velY,this.recorrY++,this.check_cambioY(this.recorrY),this.check_cambioDireccion(),this.rect.y>t.resolucion[1]&&this.reset_pajaro(0)))}check_cambioDireccion(){(this.rect.x>=t.resolucion[0]-this.rect.ancho&&this.move.velX>0||this.rect.x<=0&&this.move.velX<0)&&(this.move.velX=-this.move.velX,this.move.flip=this.move.flip?this.move.flip=!1:this.move.flip=!0)}check_cambioY(i){i>=this.max_recorrY&&(this.recorrY=0,this.move.velY=-this.move.velY)}reset_pajaro(i){const s=this.selecc_posInicial(i);this.rect.x=s[0],this.rect.y=s[1],this.move.velX=s[2],this.move.velY=s[3],this.move.flip=s[4],this.move.anima=0,this.move.activo=!1,setTimeout(()=>{this.abatido=!1,this.move.activo=!0},5e3)}selecc_posInicial(i){const s=[];let e=Math.floor(Math.random()*2);e===0?s.push(-t.constante.bsx*2):s.push(t.resolucion[0]-t.constante.bsx*2),e=Math.floor(t.resolucion[1]/3),s.push(i+Math.floor(Math.random()*e));const c=2+Math.floor(t.marcadores.nivel/3);return s[0]<t.resolucion[0]/2?s.push(Math.floor(Math.random()*c)+2):s.push(-(Math.floor(Math.random()*c)+2)),s.push(Math.floor(Math.random()*3)-1),s[0]<t.resolucion[0]/2?s.push(!0):s.push(!1),s}}const r=class r{constructor(i){this.anchoTile=t.constante.bsx,this.altoTile=t.constante.bsy,this.ctx=t.ctx,this.img=t.imagenes.escalera,this.img.src="./img/ladderWide_mid.png",this.rect={x:i[0]*this.anchoTile,y:i[1]-i[2],ancho:this.anchoTile,alto:i[2],size:i[2]},console.log(this.rect.y,this.rect.size,this.altoTile)}dibuja(i){this.rect.x+=i[0],this.rect.y+=i[1];const s=this.rect.y+this.rect.size;for(let e=this.rect.y;e<s;e+=this.altoTile)this.ctx.drawImage(this.img,this.rect.x,e,this.anchoTile,this.altoTile)}};u(r,"ini_suelo",g.resolucion[1]-g.bsy*2),u(r,"gap",g.bsy*6),u(r,"gapMini",g.bsy*2),u(r,"array_escaleras",[[31,r.ini_suelo,r.gap],[-1,r.ini_suelo-r.gap*1,r.gap],[25,r.ini_suelo-r.gap*2,r.gap*2],[8,r.ini_suelo-r.gap*2,r.gap],[-5,r.ini_suelo-r.gap*3,r.gap],[34,r.ini_suelo-r.gap*4,r.gap]]),u(r,"array_escaleras2",[[31,r.ini_suelo,r.gap],[10,r.ini_suelo,r.gap*3],[25,r.ini_suelo-r.gap*2,r.gap*2],[12,r.ini_suelo-r.gap*3,r.gap*3],[-5,r.ini_suelo-r.gap*3,r.gap],[34,r.ini_suelo-r.gap*4,r.gap]]),u(r,"array_nivelesEscaleras",[r.array_escaleras,r.array_escaleras2,r.array_escaleras]);let I=r;const p=class p{constructor(i){this.anchoTile=t.constante.bsx,this.altoTile=t.constante.bsy,this.id=i[0],this.ctx=t.ctx,this.img=new Image,this.img.src=this.id,this.accion=i[3],this.accion_realizada=!1,this.rect={x:i[1],y:i[2],ancho:this.anchoTile*2,alto:this.altoTile*2},this.rect.y-=this.rect.alto,this.clip={x:0,y:0,ancho:128,alto:90}}dibuja(i){this.accion_realizada?(this.rect.x=0,this.rect.y=0):(this.rect.x+=i[0],this.rect.y+=i[1]);const s=this.clip.ancho,e=this.clip.alto;this.ctx.drawImage(this.img,this.clip.x,this.clip.y,s,e,this.rect.x,this.rect.y,this.rect.ancho,this.rect.alto)}};u(p,"ini_suelo",g.resolucion[1]-g.bsy*2),u(p,"gap",g.bsy*6),u(p,"gapMini",g.bsy*2),u(p,"array_llaves",[["./img/keyYellow.png",29*g.bsx,p.ini_suelo-p.gap*3,!0],["./img/keyYellow.png",54*g.bsx,p.ini_suelo-p.gap*6,!0],["./img/keyYellow.png",29*g.bsx,p.ini_suelo-p.gap*3,!0]]);let T=p;const l=class l{constructor(i){this.anchoTile=t.constante.bsx,this.altoTile=t.constante.bsy,this.id=i[0],this.ctx=t.ctx,this.img=new Image,this.img.src=this.id,this.accion=i[3],this.accion_realizada=!1,this.rect={x:i[1]*this.anchoTile,y:i[2]-this.altoTile,ancho:this.anchoTile,alto:this.altoTile};const s=this.elegir_item();this.colorId=(s-8)/32,this.puntos=2e3,this.clip={x:s,y:224,ancho:32,alto:24}}dibuja(i){this.rect.x+=i[0],this.rect.y+=i[1];const s=this.clip.ancho,e=this.clip.alto;this.rect.x<-t.constante.bsx||this.rect.x>t.resolucion[0]+t.constante.bsx||this.rect.y<-t.constante.bsy*2||this.rect.y>t.resolucion[1]+t.constante.bsy||this.accion_realizada||this.ctx.drawImage(this.img,this.clip.x,this.clip.y,s,e,this.rect.x,this.rect.y,this.rect.ancho,this.rect.alto)}elegir_item(){return 8+32*Math.floor(Math.random()*7)}};u(l,"ini_suelo",g.resolucion[1]-g.bsy*2),u(l,"gap",g.bsy*6),u(l,"gapMini",g.bsy*2),u(l,"array_bonus",[["./img/items_ri.png",35,l.ini_suelo,!0],["./img/items_ri.png",12,l.ini_suelo-l.gap*1,!0],["./img/items_ri.png",29,l.ini_suelo-l.gap*2,!0],["./img/items_ri.png",10,l.ini_suelo-l.gap*3,!0],["./img/items_ri.png",12,l.ini_suelo-l.gap*4,!0],["./img/items_ri.png",33,l.ini_suelo-l.gap*5,!0],["./img/items_ri.png",25,l.ini_suelo-l.gap*6,!0],["./img/items_ri.png",-6,l.ini_suelo-l.gap*3,!0],["./img/items_ri.png",-4,l.ini_suelo-l.gap*5,!0]]),u(l,"array_bonus2",[["./img/items_ri.png",35,l.ini_suelo,!0],["./img/items_ri.png",8,l.ini_suelo-l.gap*3,!0],["./img/items_ri.png",32,l.ini_suelo-l.gap*3,!0],["./img/items_ri.png",10,l.ini_suelo-l.gap*3,!0],["./img/items_ri.png",56,l.ini_suelo,!0],["./img/items_ri.png",30,l.ini_suelo-l.gap*6,!0],["./img/items_ri.png",56,l.ini_suelo-l.gap*6,!0],["./img/items_ri.png",53,l.ini_suelo,!0],["./img/items_ri.png",46,l.ini_suelo,!0]]),u(l,"array_nivelesBonus",[l.array_bonus,l.array_bonus2,l.array_bonus]);let k=l;class Z{constructor(i,s,e){this.id=i,this.mostrar=!1,this.ctx=t.ctx,this.img=new Image,this.img.src="./img/items_ri.png";const c=Math.floor(t.resolucion[0]/2-t.constante.bsx*7/2);this.rect={x:c+s,y:e,ancho:t.constante.bsx,alto:t.constante.bsy};const h=8+32*this.id;this.clip={x:h,y:224,ancho:32,alto:24},this.contador=0,this.img_completed=new Image,this.img_completed.src="./img/showPtos.png",this.xc=c,this.yc=t.constante.bsy,this.cancho=t.constante.bsx*7,this.calto=t.constante.bsy,this.ccx=80,this.ccy=0,this.ccanc=100,this.ccalc=20,this.showInterm=!0,setInterval(()=>{this.showInterm?this.showInterm=!1:this.showInterm=!0},900)}dibuja(){this.contador++,this.contador>=7&&(this.contador=0),this.mostrar&&!t.objeto.jugador.getLos7?this.ctx.drawImage(this.img,this.clip.x,this.clip.y,this.clip.ancho,this.clip.alto,this.rect.x,this.rect.y,this.rect.ancho,this.rect.alto):this.mostrar&&t.objeto.jugador.getLos7&&this.ctx.drawImage(this.img,8+32*this.contador,this.clip.y,this.clip.ancho,this.clip.alto,this.rect.x,this.rect.y,this.rect.ancho,this.rect.alto),t.objeto.jugador.getLos7&&this.showInterm&&this.ctx.drawImage(this.img_completed,this.ccx,this.ccy,this.ccanc,this.ccalc,this.xc,this.yc,this.cancho,this.calto)}}class ${constructor(i,s,e,c,h){this.id=i,this.ctx=t.ctx,this.img=new Image,this.img.src=this.id,this.rect={x:s,y:e,ancho:c,alto:h},this.clip={x:400,y:220,ancho:80,alto:110}}dibuja(){this.ctx.drawImage(this.img,this.clip.x,this.clip.y,this.clip.ancho,this.clip.alto,this.rect.x,this.rect.y,this.rect.ancho,this.rect.alto)}}function _(a,i,s,e){return a.rect.x+s.obj1_hor<i.rect.x+i.rect.ancho-s.obj2_hor&&a.rect.x+a.rect.ancho-s.obj1_hor>i.rect.x+s.obj2_hor&&a.rect.y+s.obj1_ver<i.rect.y+e+i.rect.alto-s.obj2_ver&&a.rect.y+a.rect.alto-s.obj1_ver>i.rect.y+e+s.obj2_ver}function E(a,i){return a.rect.x<i.rect.x+i.rect.ancho&&a.rect.x+a.rect.ancho>i.rect.x&&a.rect.y<i.rect.y+i.rect.alto*2&&a.rect.y+a.rect.alto>i.rect.y}function N(){const a=X.nro_CHISPASfireWorks,i=Math.floor(t.resolucion[0]/2),s=Math.floor(t.resolucion[1]/4),e=Math.floor(Math.random()*i)+t.resolucion[0]/4,c=Math.floor(Math.random()*s)+t.resolucion[1]/8;for(let h=0;h<a;h++)t.objeto.chispa.push(new X(h,e,c))}function D(){t.objeto.plataforma=[],t.objeto.escalera=[],t.objeto.decorativos=[],G(t.marcadores.nivel),C(t.marcadores.nivel),F(t.marcadores.nivel),J(t.marcadores.nivel),R(t.marcadores.nivel),ht(),t.marcadores.nivel++,t.msg.nivel=!0,t.estado.nivelSuperado=!1,t.objeto.jugador.invisible=!0,setTimeout(()=>{t.objeto.jugador.invisible=!1,t.msg.nivel=!1},t.constante.pausaMsgNivelMostrar),t.sonidos.fireWorks.pause(),t.sonidos.musicaFondo.play()}function P(){for(let a of g.ini_scrolls)t.objeto.scroll.push(new g(a,t.resolucion[0],t.resolucion[1]))}function tt(){t.objeto.jugador=new K(t.ini_jugador.args)}function it(){t.objeto.boommerang.push(new S("./img/boommerang_sheet.png",-100,-100,-1,-1))}function st(){const a=t.opciones_menuP.botonSelectDificultad;for(let i=0;i<t.nro_enemigosDificultad.mariq[a];i++){const s=Math.floor(Math.random()*L.nro_bichos);t.objeto.bichos.push(new L(s))}}function et(){const a=t.opciones_menuP.botonSelectDificultad;for(let i=0;i<t.nro_enemigosDificultad.pajaros[a];i++)t.objeto.pajaros.push(new Q(i,0))}function ot(){for(let a of x.array_textos)t.objeto.textos.push(new x(a))}function G(a){const i=y.array_nivelesPlataformas[a],s=i.length-1;for(let e=s;e>=0;e--)i[e][5]===0?t.objeto.plataforma.push(new y(i[e],"./img/tile1.png")):t.objeto.plataforma.push(new U(i[e],"./img/tile6.png"))}function C(a){const i=I.array_nivelesEscaleras[a];for(let s of i)t.objeto.escalera.push(new I(s))}function F(a){const i=M.array_nivelesDecorativos[a];for(let s of i){const e=s[0]*t.constante.bsx,c=s[4];console.log("dec:",e,s[3],s[1],s[2],s[4]),t.objeto.decorativos.push(new M(s[3],e,s[1],s[2],c))}}function R(a){const i=T.array_llaves[a];t.objeto.llave=new T(i)}function J(a){const i=k.array_nivelesBonus[a];for(let s of i)t.objeto.bonus.push(new k(s))}function at(){for(let a=0;a<t.constante.nro_DIAMANTES;a++)t.objeto.lossiete.push(new Z(a,t.constante.bsx*a,0))}function nt(){for(let a=t.marcadores.vidas;a>0;a--){const i="./img/Ssheet_jugador.png",s=t.resolucion[0]-a*t.constante.bsx-t.constante.bsx;t.objeto.showvidas.push(new $(i,s,0,t.constante.bsx,t.constante.bsy))}}function ct(){if(t.marcadores.vidas<0&&t.estado.enJuego){t.estado.enJuego=!1,t.estado.gameOver=!0;const i=["Toque Pantalla o pulse ENTER para jugar volver a jugar...","center",27,"rgb(240, 49, 19)"];setTimeout(()=>{t.estado.gameOver=!1,t.estado.reJugar=!0,t.objeto.textos.push(new x(i))},5e3)}}function ht(){if(t.objeto.jugador.getLos7||t.marcadores.nivel===0){t.objeto.jugador.getLos7=!1;for(let a of t.objeto.lossiete)a.mostrar=!1}}function rt(){return t.objeto.lossiete.every(a=>a.mostrar)}function lt(){t.ctx.fillStyle=t.colores.sueloColor,t.ctx.fillRect(0,0,t.canvas.width,t.canvas.height)}function f(a,i,s){a.play(),a.loop=i,a.volume=s}document.addEventListener("keydown",a=>{const i=Object.keys(t.tecla),s=a.key;if(t.estado.reJugar)(s===t.tecla.tecla_enter[0]||s===t.tecla.tecla_enter[1])&&location.reload();else if(t.estado.enJuego){for(let e of i)(s===t.tecla[e][0]||s===t.tecla[e][1])&&(t.controles[e]=!0);(s===t.tecla.tecla_music_onoff[0]||s===t.tecla.tecla_music_onoff[1])&&(t.sonidos.musicaFondo.paused?(console.log("musica ON"),t.sonidos.musicaFondo.play()):(console.log("musica OFF"),t.sonidos.musicaFondo.pause())),s==="T"&&(t.trucos.invisible?(console.log("modo normal"),t.trucos.invisible=!1):(console.log("modo invisible"),t.trucos.invisible=!0)),s==="Y"&&(t.trucos.vidasInfinitas=!0)}});document.addEventListener("keyup",a=>{const i=Object.keys(t.tecla),s=a.key;if(t.estado.enJuego)for(let e of i)(s===t.tecla[e][0]||s===t.tecla[e][1])&&(t.controles[e]=!1)});document.addEventListener("touchstart",a=>{const i=Object.keys(t.tecla),s=a.target.id;if(t.estado.reJugar&&(s===t.tecla.touch_newGame[0]||s===t.tecla.touch_canvas[0])&&location.reload(),t.estado.enJuego)for(let e of i)(s===t.tecla[e][0]||s===t.tecla[e][1])&&(t.controles[e]=!0);t.estado.nivelSuperado,(s===t.tecla.touch_music_onoff[0]||s===t.tecla.touch_music_onoff[1])&&(t.sonidos.musicaFondo.paused?(console.log("musica: ON"),t.sonidos.musicaFondo.play()):(console.log("musica: OFF"),t.sonidos.musicaFondo.pause()))});document.addEventListener("touchend",a=>{const i=Object.keys(t.tecla),s=a.target.id;if(t.estado.enJuego)for(let e of i)(s===t.tecla[e][0]||s===t.tecla[e][1])&&(t.controles[e]=!1)});document.addEventListener("click",a=>{const i=a.target.id;t.estado.reJugar?(i===t.tecla.touch_newGame[0]||i===t.tecla.touch_canvas[0])&&location.reload():t.estado.nivelSuperado});let ut=1,t,Y=[0,0];window.onload=()=>{t=new H(ut);const a=Object.keys(t.marcadores);for(let i of a)(i==="botonSelectMusica"||i==="botonSelectDificultad")&&t.marcadores[i].addEventListener("click",()=>{t.opciones_menuP[i]++,t.opciones_menuP[i]>=3&&(t.opciones_menuP[i]=0);const s=t.opciones_menuP[i];t.marcadores[i].innerHTML=t.constante[i][s],f(t.sonidos.dieThrow1,!1,.9),f(t.sonidos.chips1,!1,.9)});t.marcadores.botonNewGame.addEventListener("click",()=>{f(t.sonidos.dieThrow1,!1,.9),f(t.sonidos.chips2,!1,.9),gt()})};function gt(){t.marcadores.menuPrincipal.style.display="none",t.canvas.style.display="flex";const a=t.resolucion[0],i=t.resolucion[1];t.canvas.width=a,t.canvas.height=i,t.ctx.scale(t.escala.x,t.escala.y),P(),tt(),it(),st(),et(),G(0),C(0),F(0),J(0),R(0),ot(),at(),nt(),setInterval(()=>{dt()},1e3/t.constante.FPS),setTimeout(()=>{mt()},999)}function mt(){t.estado.preJuego=!1,t.estado.enJuego=!0,t.msg.nivel=!0,setTimeout(()=>{t.msg.nivel=!1},t.constante.pausaMsgNivelMostrar),t.opciones_menuP.botonSelectMusica!=1&&f(t.sonidos.musicaFondo,!0,t.volumen.musicaFondo)}function dt(){lt();const a=Object.keys(t.objeto);for(let i of a)if(i==="jugador")Y=t.objeto[i].dibuja();else if(i==="lossiete"||i==="showvidas")for(let s of t.objeto[i])s.dibuja();else if(i==="llave")t.objeto[i].dibuja(Y);else for(let s of t.objeto[i])s.dibuja(Y);ct()}
